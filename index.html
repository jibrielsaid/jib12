<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <link rel="stylesheet" href="style.css">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <style>
        .cart-icon-nav {
            position: relative;
            display: inline-flex;
            align-items: center;
        }
        
        .cart-badge-nav {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ff5252;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
            border: 2px solid white;
        }
    </style>

    <title>TECHPARTS HUB</title>
</head>
<body>
    

    <nav class="navbar">
     <div class="logo"><h1>TECHPARTS HUB</h1></div>

     <ul class="menu">
        <li><a href="index.html" class="active">Home</a></li>
        <li><a href="shop.html">Shop</a></li>
        <li><a href="AboutUs.html">About Us</a></li>
        <li><a href="myaccount.html">My Account</a></li>
        <li>
            <a href="cart.html" class="cart-icon-nav">
                <i class="fa-solid fa-cart-shopping" style="font-size: 22px; color: #333;"></i>
                <span class="cart-badge-nav" id="cart-badge-nav" style="display: none;">0</span>
            </a>
        </li>
        <li id="nav-user" style="display:none;">
            <span id="nav-username" style="color:#ddd; margin-left:8px;"></span>
            <button id="nav-logout" style="margin-left:8px; background:transparent; border:1px solid rgba(255,255,255,0.06); color:#ddd; padding:4px 8px; border-radius:4px; cursor:pointer;">Logout</button>
        </li>
    </ul>
    
    <div class="menu-bnt">
        <i class="fa fa-bars"></i>
    </div>
</nav>


        

       
    

   

    <section class="content">
        <div class="hero-text">
            <h1>High-Performance Computer Parts & Components</h1>
            <p>Discover cutting-edge computer components from top brands. Build your dream PC with premium quality and performance.</p>
            <a class="primary-btn" href="shop.html">Shop Now</a>
        </div>
    </section>


    <h1 class="pheading">Premium Computer Components</h1>

    <footer>
        <p>Copyright Â© <a href="#">TECHPARTS HUB</a></p>
    </footer>

    <script>
        $(".menu-bnt").click(function (){ 
            $(".navbar .menu").toggleClass("active");
            $(".menu-bnt i").toggleClass("active");
        });
    </script>

    <script>
        // Update cart badge count in navigation
        function updateCartBadgeNav() {
            try {
                const raw = localStorage.getItem('cart');
                const cart = raw ? JSON.parse(raw) : [];
                const badge = document.getElementById('cart-badge-nav');
                
                if (badge) {
                    let totalItems = 0;
                    cart.forEach(item => {
                        totalItems += (item.quantity || 1);
                    });
                    
                    if (totalItems > 0) {
                        badge.textContent = totalItems;
                        badge.style.display = 'flex';
                    } else {
                        badge.style.display = 'none';
                    }
                }
            } catch (e) {
                // Ignore errors
            }
        }
        
        // Update cart badge on page load
        updateCartBadgeNav();
        
        // Logout functionality
        (function(){
            function showUser() {
                let raw = null;
                try { raw = sessionStorage.getItem('session') || localStorage.getItem('user'); } catch(e) { raw = localStorage.getItem('user'); }
                const navUser = document.getElementById('nav-user');
                const navName = document.getElementById('nav-username');
                const logout = document.getElementById('nav-logout');
                if (!navUser || !navName || !logout) return;
                if (raw) {
                    let user = raw;
                    try { user = JSON.parse(raw); } catch(e){}
                    navName.textContent = (user && user.name) ? user.name : 'Account';
                    navUser.style.display = '';
                } else {
                    navUser.style.display = 'none';
                }

                logout.addEventListener('click', function(){
                    // Save current cart to user account before logout
                    try {
                        const cartRaw = localStorage.getItem('cart');
                        if (cartRaw) {
                            const cart = JSON.parse(cartRaw);
                            const userRaw = localStorage.getItem('user');
                            if (userRaw) {
                                const user = JSON.parse(userRaw);
                                const accounts = JSON.parse(localStorage.getItem('accounts') || '[]');
                                const accountIndex = accounts.findIndex(acc => acc.email && acc.email.toLowerCase() === user.email.toLowerCase());
                                if (accountIndex !== -1) {
                                    accounts[accountIndex].cart = cart;
                                    localStorage.setItem('accounts', JSON.stringify(accounts));
                                }
                            }
                        }
                    } catch (e) {}
                    
                    // Remove current user, but keep accounts list for future logins
                    localStorage.removeItem('user');
                    try { sessionStorage.removeItem('session'); } catch(e){}
                    localStorage.removeItem('cart'); // Clear cart on logout
                    location.reload();
                });
            }
            document.addEventListener('DOMContentLoaded', showUser);
            showUser();
        })();
    </script>
   
   


